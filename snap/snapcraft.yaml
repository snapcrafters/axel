name: axel
version: 'latest'
version-script: cat $SNAPCRAFT_STAGE/VERSION | cut -d ' ' -f1
summary: Lightweight CLI download accelerator
title: Axel
description: |
  Axel is a command-line tool to download files, supporting some interesting features:

  - Usage of multiple connections per file, possibly speeding up the download proccess and also balancing the load between different servers;
  - Very lightweight, which can be useful specially on byte-critical systems;
  - Supports the HTTP, HTTPS, FTP and FTPS protocols.
  
  The creation of such tool was only possible thanks to the original developer of Axel, Wilmer van der Gaast, and every contributer to the project who worked over the years.
     
   **Authors**

  This snap is maintained by the Snapcrafters community, and is not necessarily endorsed or officially maintained by the upstream developers.
donation: https://liberapay.com/ismael/donate
issues: https://github.com/snapcrafters/axel/issues
license: GPL-2.0
source-code: https://github.com/axel-download-accelerator/axel/
website: https://github.com/axel-download-accelerator/axel/

grade: stable
confinement: strict
base: core18

parts:
  axel:
    plugin: nil
    override-pull: |
      URL=$(curl https://api.github.com/repos/axel-download-accelerator/axel/releases/latest -s | jq .zipball_url -r)
      wget $URL -O release.zip
      unzip release.zip -d release
      cd release/*
      autoreconf -fiv
      ./configure --prefix=$PWD/build_dir; make; make install build_dir
      mv build_dir/* ${SNAPCRAFT_PART_INSTALL}
      mv VERSION $SNAPCRAFT_STAGE/
      cd ../../
      rm -r release.zip release
    build-packages:
      - curl
      - jq
      - wget
      - unzip
      - autoconf
      - autoconf-archive
      - automake
      - pkg-config
      - gettext
      - txt2man
      - autopoint
      - libssl-dev
    stage-packages:
      - libssl1.0.0

apps:
  axel:
    command: bin/axel
    plugs:
      - network
      - home
